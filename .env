# =============================================================================
# ADAPTIVE FIREWALL RL CONFIGURATION - COMPLETE .env FILE
# =============================================================================
# Copy this ENTIRE content into your .env file in VS Code
# Save as: .env (with the dot at the beginning)

# =============================================================================
# ü§ñ RL TRAINING HYPERPARAMETERS (Controls how your AI learns)
# =============================================================================
LEARNING_RATE=0.001
GAMMA=0.99
EPSILON_START=1.0
EPSILON_END=0.1
EPSILON_DECAY=0.995
BATCH_SIZE=32
BUFFER_SIZE=10000
TARGET_UPDATE_FREQUENCY=1000
MAX_EPISODES=1000
MAX_STEPS_PER_EPISODE=200
TOTAL_TIMESTEPS=50000

# Network Architecture
HIDDEN_LAYER_SIZE=128
NUM_HIDDEN_LAYERS=2
ACTIVATION_FUNCTION=relu

# =============================================================================
# üí∞ REWARD FUNCTION WEIGHTS (CRITICAL - This teaches your AI what to do!)
# =============================================================================
# Primary rewards (from your documents: +10 malicious, -5 false positive, -1 missed)
REWARD_MALICIOUS_BLOCK=10.0
REWARD_FALSE_POSITIVE=-5.0
REWARD_MISSED_ATTACK=-1.0
REWARD_CORRECT_ALLOW=0.1
REWARD_LATENCY_PENALTY=-0.01

# Advanced reward shaping
REWARD_NOVEL_ATTACK_BONUS=5.0
REWARD_POLICY_COMPLEXITY_PENALTY=-0.05
REWARD_CONSECUTIVE_BLOCKS_PENALTY=-0.1

# Reward normalization
REWARD_SCALE_FACTOR=1.0
REWARD_CLIPPING_ENABLED=true
REWARD_CLIP_MIN=-10.0
REWARD_CLIP_MAX=15.0

# =============================================================================
# üåç ENVIRONMENT CONFIGURATION (The world your AI operates in)
# =============================================================================
# State space (20 features as recommended)
STATE_VECTOR_SIZE=20
OBSERVATION_WINDOW_SIZE=10
FIREWALL_CONTEXT_FEATURES=6

# Action space (0=Allow, 1=Block)
ACTION_SPACE_TYPE=discrete
NUM_DISCRETE_ACTIONS=2
ENABLE_PARAMETRIC_ACTIONS=false

# Episode configuration
EPISODE_LENGTH=200
TRAFFIC_SAMPLES_PER_STEP=1
RESET_FIREWALL_RULES_ON_EPISODE_START=true

# =============================================================================
# üìä DATASET AND TRAFFIC CONFIGURATION (Where to get network data)
# =============================================================================
# Dataset selection (start with synthetic for testing)
DATASET_PRIMARY=synthetic
TRAFFIC_SIMULATION_MODE=synthetic

# Real dataset paths (create data folders for these)
NSL_KDD_PATH=data/nsl_kdd/
NSL_KDD_TRAIN_FILE=data/nsl_kdd/KDDTrain+.txt
NSL_KDD_TEST_FILE=data/nsl_kdd/KDDTest+.txt
CICIDS_PATH=data/cicids2017/
CICIDS_MONDAY_FILE=data/cicids2017/Monday-WorkingHours.pcap_ISCX.csv

# Synthetic data generation
SYNTHETIC_SAMPLES=10000
SYNTHETIC_ATTACK_RATIO=0.2
SYNTHETIC_SEED=42
INTER_ARRIVAL_TIME_MEAN=0.1

# Data preprocessing
FEATURE_NORMALIZATION=true
FEATURE_SCALING_METHOD=standard
HANDLE_MISSING_VALUES=true
MAX_FEATURES=20

# =============================================================================
# üî• FIREWALL INTEGRATION (How AI controls firewall rules)
# =============================================================================
FIREWALL_BACKEND=simulation
IPTABLES_CHAIN=INPUT
RULE_PRIORITY_BASE=1000
MAX_ACTIVE_RULES=1000

# Rule management
RULE_EXPIRATION_TIME=3600
RULE_CLEANUP_INTERVAL=300
ENABLE_RULE_VERSIONING=true
ALLOW_RULE_CONFLICTS=false

# Safety constraints
ENABLE_SAFETY_CONSTRAINTS=true
MAX_BLOCKS_PER_MINUTE=100
WHITELIST_ENABLED=true
WHITELIST_CIDRS=127.0.0.1/32,10.0.0.0/8

# =============================================================================
# üß† EXPLAINABLE AI CONFIGURATION (Makes AI decisions understandable)
# =============================================================================
XAI_ENABLED=true
XAI_METHOD=both
EXPLANATION_DETAIL_LEVEL=medium

# LIME settings
LIME_NUM_SAMPLES=1000
LIME_NUM_FEATURES=10
LIME_KERNEL_WIDTH=0.25

# SHAP settings
SHAP_BACKGROUND_SAMPLES=100
SHAP_MAX_EVALUATIONS=500
SHAP_FEATURE_IMPORTANCE_THRESHOLD=0.1

# Performance optimization
XAI_COMPUTE_ASYNC=true
XAI_MAX_COMPUTATION_TIME=5.0
XAI_CACHE_EXPLANATIONS=true
XAI_EXPLANATION_FREQUENCY=1.0

# =============================================================================
# üìä MONITORING AND METRICS (Track how well your AI performs)
# =============================================================================
# Performance tracking
TRACK_ATTACK_DETECTION_RATE=true
TRACK_FALSE_POSITIVE_RATE=true
TRACK_RESPONSE_TIME=true
TRACK_POLICY_COMPLEXITY=true

# Collection intervals
METRIC_COLLECTION_INTERVAL=30
METRIC_AGGREGATION_WINDOW=300
METRIC_RETENTION_PERIOD=86400

# Alert thresholds
FALSE_POSITIVE_RATE_THRESHOLD=0.05
ATTACK_DETECTION_RATE_THRESHOLD=0.90
RESPONSE_TIME_THRESHOLD=2.0
CPU_USAGE_THRESHOLD=80.0

# =============================================================================
# üåê API AND WEB SERVICE (For Phase 2 - later)
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_DEBUG=true
API_RELOAD=true
API_WORKERS=1

# CORS configuration
CORS_ALLOW_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE
CORS_ALLOW_HEADERS=*

# Authentication
AUTH_ENABLED=false
JWT_SECRET_KEY=your-super-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# üìù LOGGING AND DEBUGGING (What information to save and show)
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE_PATH=logs/adaptive_firewall.log
LOG_MAX_FILE_SIZE=10485760
LOG_BACKUP_COUNT=5

# Debug settings
DEBUG_MODE=true
DEBUG_SAVE_EPISODES=true
DEBUG_SAVE_DECISIONS=true
DEBUG_PRINT_REWARDS=true
DEBUG_VALIDATE_STATE_SHAPE=true

# =============================================================================
# üíæ MODEL PERSISTENCE AND CHECKPOINTING (Save your trained AI)
# =============================================================================
MODEL_SAVE_PATH=models/
SAVE_MODEL_FREQUENCY=1000
KEEP_BEST_MODELS=5
MODEL_FORMAT=sb3

# Checkpointing
ENABLE_CHECKPOINTING=true
CHECKPOINT_FREQUENCY=500
CHECKPOINT_PATH=checkpoints/
KEEP_CHECKPOINT_COUNT=10

# =============================================================================
# üöÄ DEVELOPMENT AND TESTING (Makes development faster)
# =============================================================================
# Development mode (use smaller datasets and shorter training)
DEV_MODE=true
DEV_SAMPLE_SIZE=1000
DEV_MAX_EPISODES=100
DEV_SKIP_VALIDATION=false
DEV_VERBOSE_LOGGING=true

# Testing and validation
TEST_SPLIT_RATIO=0.2
VALIDATION_SPLIT_RATIO=0.1
CROSS_VALIDATION_FOLDS=5
RANDOM_STATE=42

# =============================================================================
# üîß SYSTEM AND PERFORMANCE (Hardware and resource settings)
# =============================================================================
# Hardware requirements
MIN_RAM_GB=4
RECOMMENDED_RAM_GB=8
MIN_DISK_GB=5
GPU_ENABLED=false

# Performance settings
NUM_WORKERS=2
BATCH_PROCESSING=true
CACHE_PREPROCESSED_DATA=true
CACHE_DIRECTORY=cache/

# =============================================================================
# üê≥ DEPLOYMENT CONFIGURATION (For Phase 3 - later)
# =============================================================================
# Production settings
PRODUCTION_MODE=false
ENABLE_TELEMETRY=true
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=60

# Resource limits
MAX_MEMORY_USAGE=2048
MAX_CPU_USAGE=80.0
MAX_DISK_USAGE=10240

# Container settings
CONTAINER_NAME=adaptive-firewall
CONTAINER_RESTART_POLICY=unless-stopped
CONTAINER_NETWORK=bridge

# =============================================================================
# üìÅ FILE SYSTEM PATHS (Where everything gets saved)
# =============================================================================
BASE_DATA_DIR=data/
MODEL_OUTPUT_DIR=models/
LOG_OUTPUT_DIR=logs/
CHECKPOINT_DIR=checkpoints/
RESULTS_DIR=results/
PLOTS_DIR=plots/
TENSORBOARD_LOG_DIR=logs/tensorboard/

# File naming
MODEL_NAME_PREFIX=firewall_rl
TIMESTAMP_FORMAT=%Y%m%d_%H%M%S
LOG_FILENAME=adaptive_firewall.log
METRICS_FILENAME=training_metrics.json

# =============================================================================
# üõ°Ô∏è SECURITY AND SAFETY CONSTRAINTS (Prevent system from going wrong)
# =============================================================================
# Emergency stop conditions
ENABLE_EMERGENCY_STOP=true
MAX_CONSECUTIVE_BLOCKS=10
EMERGENCY_STOP_FP_RATE=0.2
BLACKLIST_IPS=

# Model validation
REQUIRE_MODEL_VALIDATION=true
MIN_VALIDATION_ACCURACY=0.8
MIN_VALIDATION_F1_SCORE=0.7
MAX_VALIDATION_FALSE_POSITIVE_RATE=0.05

# Advanced features (for later)
ENABLE_MULTI_AGENT=false
ENABLE_TRANSFER_LEARNING=false
ENABLE_CURIOSITY_DRIVEN_EXPLORATION=false
